{% extends 'base.html' %}


{% block title %} Topic {% endblock %}

{% block body %}
{% load static %}

<div class="modal fade" id="modalTopicForm" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header text-center">
                
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                      <span aria-hidden="true">&times;</span>
                    </button>
            </div>
            <div class="modal-body mx-3">
                <form class="form-settings" action="{% url 'courses:topic_update' topic_details.0 %}" method="POST">
                    {% csrf_token %}
                    
                    <div class="md-form mb-4">
                        <label data-error="wrong" data-success="right" for="title">Topic Title</label>
                        <input type="text" id='title' name = 'title' class="form-control validate" value = '{{topic_details.1}}' required>
                        
                    </div>

                    <div class="md-form mb-4">
                        <label data-error="wrong" data-success="right" for="Description">Topic Description</label>
                        <input type="text" id='Description' name = 'Description' class="form-control validate" value = '{{topic_details.2}}' required>
                        
                    </div>

                    <div class="modal-footer d-flex justify-content-center">
                        <button class="btn btn-lg btn-outline-primary btn-block mb-5" type="submit">Confirm Changes</button> 
                        
                    </div>
                    </form>
  
            </div>
            
        </div>
    
    </div>
  </div> 

<a href ="{% url 'courses:course_contents' topic_details.5 %}"><span class="oi oi-arrow-left"></span>Back</a>
<h2 class="text-center" style="color:#069">{{topic_details.1}}</h2>
{% if topic_details.2 != None %}
<h4 class="text-center" style="color:#069">{{topic_details.2}}</h4>
{% endif %}

<div class="text-center">
<button class="button" data-toggle="modal" data-target="#modalTopicForm"><span class="oi oi-pencil"></span>Edit</button>
</div>
<br>
<h6 class="text-center" style="color:#cf3046">{{topic_details.3}} , Class {{topic_details.4}}</h6>

{% if error %}
    <div style="padding-top: 50px;"></div>
    <div class="alert alert-danger" style="padding-left: 400px;padding-top: 50;">{{error}}</div>
{% endif %}

<div class="row  pt-3" >
      
    <div class="modal fade" id="modalSubscriptionForm" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header text-center">
                    <h4 class="modal-title w-100 font-weight-bold">{{topic.1}}</h4>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                        </button>
                </div>
                <div class="modal-body mx-3">
                    <form class="form-settings" action="{% url 'courses:add_content' topic_details.5 topic_details.0 %}" method="POST">
                    {% csrf_token %}
                    
                    <div class="md-form mb-4">
                        <label data-error="wrong" data-success="right" for="videotitle">Video Title</label>
                        <input type="text" id='text' name = 'videotitle' class="form-control validate" required>
                        
                    </div>

                    <div class="md-form mb-4">
                        <label data-error="wrong" data-success="right" for="videourl">Video URL</label>
                        <input type="url" id='videourl' name = 'videourl' class="form-control validate" required>
                        
                    </div>

                    <div class="md-form mb-4">
                        <label data-error="wrong" data-success="right" for="Description">Video Description</label>
                        <input type="text" id='text' name = 'Description' class="form-control validate" required>
                        
                    </div>

                    <div class="modal-footer d-flex justify-content-center">
                        <button class="btn btn-lg btn-outline-primary btn-block mb-5" type="submit">Confirm</button> 
                        
                    </div>
                    </form>

                </div>
                
            </div>
        
        </div>
    </div>

    <div class="col-md-3" >
        <a href="" class="btn btn-lg btn-outline-primary btn-block mb-5" data-toggle="modal" data-target="#modalSubscriptionForm">Add Video</a>
    </div>
       
    <div class="col-md-3" >
        <a href="{% url 'courses:add_exams' topic_details.5 topic_details.0 %}" class="btn btn-lg btn-outline-primary btn-block mb-5" >Add Exam</a>
    </div>
    

</div>

<h4>Contents</h4>

<ul class="list-group list-group-flush mydiv" >
    {% for content in contents %}
    <div class="modal fade" id="test{{content.7}}" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header text-center">
                    
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                          <span aria-hidden="true">&times;</span>
                        </button>
                </div>
                <div class="modal-body mx-3">
                    <h5 class="modal-title w-100 font-weight-bold"  style="text-align:center">Delete this content permanently?</h5>
                    <form class="form-settings" action="{% url 'courses:del_content' topic_details.0 content.7 %}" method="POST">
                    {% csrf_token %}
                    
                    
                    <div class="modal-footer d-flex justify-content-center">
                        <button class="btn btn-info btn-sm" type="submit">Confirm</button> 
                        
                    </div>
                  </form>
      
                </div>
                
            </div>
        
        </div>
    </div>

    <div class="modal fade" id="modify{{content.7}}" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header text-center">
                    <h4 class="modal-title w-100 font-weight-bold text-uppercase">{{content.3}}</h4>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                        </button>
                </div>
                <div class="modal-body mx-3">
                    <form class="form-settings" action="{% url 'courses:modify_content' topic_details.0 content.3 content.7 %}" method="POST" >

                    {% csrf_token %}
                    <div class="card-body tab-content" > 
                        <div class="row pb-1" >
                            <div class="col-md-12">
                                Title: <input type="text" id="title" name="title" class="form-control" value = '{{content.1}}'>
                            </div>
                        </div>

                        <div class="row pb-1" >
                            <div class="col-md-12">
                                Description: <textarea class="form-control" id="description" name="description" rows="3">{{content.2}}</textarea>
                                
                            </div>
                        </div>

                        {% if content.3 == 'video' %}
                        <div class="row pb-1" >
                            <div class="col-md-12">
                                URL: <input type="URL" id="videourl" name="videourl" class="form-control" value = '{{content.5}}'>
                            </div>
                        </div>
                        {% else %}
                        <div class="row pb-1" >
                            <div class="col-md-12">
                                <h6>Total Marks: {{content.4}}</h6>
                            </div>
                        </div> 
                        {% endif %}

                        <div class="row  pt-1" >
                            <div class="col-md-3" >
                                <button class="button btn-block" type="submit"><span class="oi oi-pencil"></span>Modify</button> 
                            </div>
                        </div>
  
                    </div>
                    </form>    
                </div>   
            </div>
        
        </div>
    </div>

    <li class="list-group-item list-group-item-action" >
            
              
                <div class="card-body tab-content" > 
                    {% if content.3 == 'video' %}<!--content.6-->
                        <div class="row pb-2" onclick="window.location='{% url 'courses:show_video' content.7 %}';" >
                        
                    {% else %}
                        <div class="row pb-2" onclick="window.location='{% url 'courses:give_exam' content.7 %}';" >
                
                    {% endif %} 

                        <div class="col-md-1">
                            {% if content.3 == 'video' %}
                                <img src="{% static 'images/video.JPG'%}" width = "50" style="border-radius: 20%;">&nbsp;&nbsp; 
                            {% else %}
                                <img src="{% static 'images/mcq.JPG'%}" width = "50" style="border-radius: 20%;">&nbsp;&nbsp;
                            {% endif %}
                        </div>

                        <div class= "col-md-9">
                            <div class="row pb-1" >
                                <b>{{content.1}}</b>
                            </div>
                      
                            <div class="row pb-1" >
                                {{content.2}}
                            </div>
                        </div>

                        <div class = "col-md-1">
                            <div class = "float-right"><a href = "{% url 'courses:content_serial' 'I' content.0 content.7 topic_details.0 %}" class="btn btn-sm btn-primary btn-sm mb-5"><span class="oi oi-arrow-thick-bottom"></span></a></div>
                        </div>    
                        <div class = "col-md-1">
                            <div class = "float-left"><a href = "{% url 'courses:content_serial' 'D' content.0 content.7 topic_details.0 %}" class="btn btn-sm btn-primary btn-sm mb-5"><span class="oi oi-arrow-thick-top"></span></a></div>
                        </div> 
                         
                    </div>
                   
                
                  
            
                  <div class="row  pt-1" >
                      
                    <div class="col-md-2" >
                        <a href="#modify{{content.7}}" class="button" data-toggle="modal"><span class="oi oi-pencil"></span>Modify</a> 
                    </div>

                    {% if content.3 == 'exam' %}
                      
                      <div class="col-md-2" >
                        <span class="align-right"><a href="{% url 'courses:add_ques' content.7 %}" class="button" >Edit questions</a></span>
                      </div>

                    {% endif %}
            
                    <div class="col-md-2" >
                        <span class="align-right"><a href="#test{{content.7}}" class="button" data-toggle="modal">Delete</a></span>
                    </div>
   
                  </div>
              
                </div>
                   
            <br>
        </li>
    {% endfor %}
</ul>


{% endblock %}